{"filter":false,"title":"app.py","tooltip":"/app.py","undoManager":{"mark":25,"position":25,"stack":[[{"start":{"row":0,"column":0},"end":{"row":47,"column":0},"action":"remove","lines":["import requests","import json","import boto3","from datetime import datetime","","def get_weather(city):","    api_key = 'bb97533805fced5bb8e6af83e94dbee8'  ","    base_url = f\"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={api_key}\"","    response = requests.get(base_url)","    data = response.json()","    ","    if response.status_code == 200:","        main = data['main']","        wind = data['wind']","        weather_desc = data['weather'][0]['description']","        ","        weather_info = {","            'Temperature': main['temp'],","            'Humidity': main['humidity'],","            'Pressure': main['pressure'],","            'Weather Description': weather_desc,","            'Wind Speed': wind['speed'],","            'Timestamp': datetime.utcnow().isoformat()","        }","        ","        # Speichern der Wetterdaten in AWS S3","        save_weather_to_s3(city, weather_info)","        ","        return weather_info","    else:","        return {\"Error\": \"City not found\"}","","def save_weather_to_s3(city, weather_info):","    s3 = boto3.client('s3')","    bucket_name = 'weatherforecast' ","    file_name = f\"weather_data/{city}_{weather_info['Timestamp']}.json\"","    ","    s3.put_object(","        Bucket=bucket_name,","        Key=file_name,","        Body=json.dumps(weather_info),","        ContentType='application/json'","    )","","if __name__ == \"__main__\":","    city = input(\"Enter city name: \")","    print(get_weather(city))",""],"id":67},{"start":{"row":0,"column":0},"end":{"row":59,"column":0},"action":"insert","lines":["import requests","import json","import boto3","from datetime import datetime","from flask import Flask, request, render_template, jsonify","","app = Flask(__name__)","","def get_weather(city):","    api_key = 'bb97533805fced5bb8e6af83e94dbee8'  ","    base_url = f\"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={api_key}\"","    response = requests.get(base_url)","    data = response.json()","    ","    if response.status_code == 200:","        main = data['main']","        wind = data['wind']","        weather_desc = data['weather'][0]['description']","        ","        weather_info = {","            'Temperature': main['temp'],","            'Humidity': main['humidity'],","            'Pressure': main['pressure'],","            'Weather Description': weather_desc,","            'Wind Speed': wind['speed'],","            'Timestamp': datetime.utcnow().isoformat()","        }","        ","        # Speichern der Wetterdaten in AWS S3","        save_weather_to_s3(city, weather_info)","        ","        return weather_info","    else:","        return {\"Error\": \"City not found\"}","","def save_weather_to_s3(city, weather_info):","    s3 = boto3.client('s3')","    bucket_name = 'weatherforecast' ","    file_name = f\"weather_data/{city}_{weather_info['Timestamp']}.json\"","    ","    s3.put_object(","        Bucket=bucket_name,","        Key=file_name,","        Body=json.dumps(weather_info),","        ContentType='application/json'","    )","","@app.route('/')","def index():","    return render_template('index.html')","","@app.route('/weather', methods=['POST'])","def weather():","    city = request.form['city']","    weather_info = get_weather(city)","    return jsonify(weather_info)","","if __name__ == \"__main__\":","    app.run(debug=True)",""]}],[{"start":{"row":4,"column":58},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":68}],[{"start":{"row":5,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["from flask_cors import CORS","app = Flask(__name__)","CORS(app)",""],"id":69}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"insert","lines":["",""],"id":70}],[{"start":{"row":9,"column":0},"end":{"row":11,"column":21},"action":"remove","lines":["","","app = Flask(__name__)"],"id":71}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":1},"action":"insert","lines":["@"],"id":72}],[{"start":{"row":10,"column":1},"end":{"row":10,"column":2},"action":"insert","lines":["a"],"id":73},{"start":{"row":10,"column":2},"end":{"row":10,"column":3},"action":"insert","lines":["p"]},{"start":{"row":10,"column":3},"end":{"row":10,"column":4},"action":"insert","lines":["p"]}],[{"start":{"row":10,"column":4},"end":{"row":10,"column":5},"action":"insert","lines":["."],"id":74},{"start":{"row":10,"column":5},"end":{"row":10,"column":6},"action":"insert","lines":["r"]},{"start":{"row":10,"column":6},"end":{"row":10,"column":7},"action":"insert","lines":["o"]},{"start":{"row":10,"column":7},"end":{"row":10,"column":8},"action":"insert","lines":["u"]},{"start":{"row":10,"column":8},"end":{"row":10,"column":9},"action":"insert","lines":["t"]},{"start":{"row":10,"column":9},"end":{"row":10,"column":10},"action":"insert","lines":["e"]}],[{"start":{"row":10,"column":10},"end":{"row":10,"column":12},"action":"insert","lines":["()"],"id":75}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":12},"action":"insert","lines":["`"],"id":76},{"start":{"row":10,"column":11},"end":{"row":10,"column":12},"action":"remove","lines":["`"]}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":12},"action":"insert","lines":["#"],"id":77}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":12},"action":"remove","lines":["#"],"id":78}],[{"start":{"row":10,"column":11},"end":{"row":10,"column":13},"action":"insert","lines":["''"],"id":79}],[{"start":{"row":10,"column":12},"end":{"row":10,"column":13},"action":"insert","lines":["/"],"id":80},{"start":{"row":10,"column":13},"end":{"row":10,"column":14},"action":"insert","lines":["w"]},{"start":{"row":10,"column":14},"end":{"row":10,"column":15},"action":"insert","lines":["e"]},{"start":{"row":10,"column":15},"end":{"row":10,"column":16},"action":"insert","lines":["a"]},{"start":{"row":10,"column":16},"end":{"row":10,"column":17},"action":"insert","lines":["t"]}],[{"start":{"row":10,"column":17},"end":{"row":10,"column":18},"action":"insert","lines":["h"],"id":81},{"start":{"row":10,"column":18},"end":{"row":10,"column":19},"action":"insert","lines":["e"]},{"start":{"row":10,"column":19},"end":{"row":10,"column":20},"action":"insert","lines":["r"]}],[{"start":{"row":10,"column":21},"end":{"row":10,"column":22},"action":"insert","lines":[","],"id":82}],[{"start":{"row":10,"column":22},"end":{"row":10,"column":23},"action":"insert","lines":[" "],"id":83},{"start":{"row":10,"column":23},"end":{"row":10,"column":24},"action":"insert","lines":["m"]},{"start":{"row":10,"column":24},"end":{"row":10,"column":25},"action":"insert","lines":["e"]},{"start":{"row":10,"column":25},"end":{"row":10,"column":26},"action":"insert","lines":["t"]},{"start":{"row":10,"column":26},"end":{"row":10,"column":27},"action":"insert","lines":["h"]},{"start":{"row":10,"column":27},"end":{"row":10,"column":28},"action":"insert","lines":["o"]},{"start":{"row":10,"column":28},"end":{"row":10,"column":29},"action":"insert","lines":["d"]}],[{"start":{"row":10,"column":29},"end":{"row":10,"column":30},"action":"insert","lines":["s"],"id":84}],[{"start":{"row":10,"column":30},"end":{"row":10,"column":31},"action":"insert","lines":["="],"id":85}],[{"start":{"row":10,"column":31},"end":{"row":10,"column":33},"action":"insert","lines":["[]"],"id":86}],[{"start":{"row":10,"column":32},"end":{"row":10,"column":34},"action":"insert","lines":["''"],"id":87}],[{"start":{"row":10,"column":33},"end":{"row":10,"column":34},"action":"insert","lines":["G"],"id":88},{"start":{"row":10,"column":34},"end":{"row":10,"column":35},"action":"insert","lines":["E"]},{"start":{"row":10,"column":35},"end":{"row":10,"column":36},"action":"insert","lines":["T"]}],[{"start":{"row":49,"column":0},"end":{"row":49,"column":26},"action":"insert","lines":["# Route f√ºr die Startseite"],"id":89}],[{"start":{"row":48,"column":5},"end":{"row":49,"column":0},"action":"insert","lines":["",""],"id":90},{"start":{"row":49,"column":0},"end":{"row":49,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":10,"column":0},"end":{"row":10,"column":39},"action":"remove","lines":["@app.route('/weather', methods=['GET'])"],"id":91}],[{"start":{"row":0,"column":0},"end":{"row":63,"column":0},"action":"remove","lines":["import requests","import json","import boto3","from datetime import datetime","from flask import Flask, request, render_template, jsonify","from flask_cors import CORS","","app = Flask(__name__)","CORS(app)","","","def get_weather(city):","    api_key = 'bb97533805fced5bb8e6af83e94dbee8'  ","    base_url = f\"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={api_key}\"","    response = requests.get(base_url)","    data = response.json()","    ","    if response.status_code == 200:","        main = data['main']","        wind = data['wind']","        weather_desc = data['weather'][0]['description']","        ","        weather_info = {","            'Temperature': main['temp'],","            'Humidity': main['humidity'],","            'Pressure': main['pressure'],","            'Weather Description': weather_desc,","            'Wind Speed': wind['speed'],","            'Timestamp': datetime.utcnow().isoformat()","        }","        ","        # Speichern der Wetterdaten in AWS S3","        save_weather_to_s3(city, weather_info)","        ","        return weather_info","    else:","        return {\"Error\": \"City not found\"}","","def save_weather_to_s3(city, weather_info):","    s3 = boto3.client('s3')","    bucket_name = 'weatherforecast' ","    file_name = f\"weather_data/{city}_{weather_info['Timestamp']}.json\"","    ","    s3.put_object(","        Bucket=bucket_name,","        Key=file_name,","        Body=json.dumps(weather_info),","        ContentType='application/json'","    )","    ","# Route f√ºr die Startseite","@app.route('/')","def index():","    return render_template('index.html')","","@app.route('/weather', methods=['POST'])","def weather():","    city = request.form['city']","    weather_info = get_weather(city)","    return jsonify(weather_info)","","if __name__ == \"__main__\":","    app.run(debug=True)",""],"id":92},{"start":{"row":0,"column":0},"end":{"row":67,"column":0},"action":"insert","lines":["import requests","import json","import boto3","from datetime import datetime","from flask import Flask, request, render_template, jsonify","from flask_cors import CORS","","app = Flask(__name__)","CORS(app)","","# Funktion zum Abrufen der Wetterdaten","def get_weather(city):","    api_key = 'bb97533805fced5bb8e6af83e94dbee8'  ","    base_url = f\"http://api.openweathermap.org/data/2.5/weather?q={city}&appid={api_key}&units=metric\"","    response = requests.get(base_url)","    data = response.json()","    ","    if response.status_code == 200:","        main = data['main']","        wind = data['wind']","        weather_desc = data['weather'][0]['description']","        ","        weather_info = {","            'Temperature': main['temp'],","            'Humidity': main['humidity'],","            'Pressure': main['pressure'],","            'Weather Description': weather_desc,","            'Wind Speed': wind['speed'],","            'Timestamp': datetime.utcnow().isoformat()","        }","        ","        # Speichern der Wetterdaten in AWS S3","        save_weather_to_s3(city, weather_info)","        ","        return weather_info","    else:","        return {\"Error\": \"City not found\"}","","# Funktion zum Speichern der Wetterdaten in AWS S3","def save_weather_to_s3(city, weather_info):","    s3 = boto3.client('s3')","    bucket_name = 'weatherforecast' ","    file_name = f\"weather_data/{city}_{weather_info['Timestamp']}.json\"","    ","    s3.put_object(","        Bucket=bucket_name,","        Key=file_name,","        Body=json.dumps(weather_info),","        ContentType='application/json'","    )","","# Route f√ºr die Startseite","@app.route('/')","def index():","    return render_template('index.html')","","# Route f√ºr die Wetter-API","@app.route('/weather', methods=['POST'])","def weather():","    city = request.form['city']","    if not city:","        return jsonify({\"Error\": \"City not provided\"}), 400","    weather_info = get_weather(city)","    return jsonify(weather_info)","","if __name__ == \"__main__\":","    app.run(debug=True, host='0.0.0.0')",""]}]]},"ace":{"folds":[],"scrolltop":698.5,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":67,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1719307000698,"hash":"6c49f9e73d165bd6380549e0015c45f24e938d6f"}